<?xml version="1.0" encoding="UTF-8"?>
<AdminTestimonialsPage>
  {TestimonialsAdminPage는 추천서/평가 데이터를 CRUD로 관리하는 테이블 중심 화면입니다. Projects와 Academics 페이지와 동일한 패턴을 따르되, 필터링 기능이 더 풍부합니다.}

  <PageContainer role="main" aria-label="Testimonials Admin">
    <PageHeader>
      <PageTitle>Testimonials</PageTitle>
      <PrimaryActionLink to="/admin/testimonials/new">
        <Button variant="primary">Create New Testimonial</Button>
      </PrimaryActionLink>
    </PageHeader>

    <FiltersContainer>
      {필터 섹션: 타입과 평점으로 필터링 가능}
      <FilterGroup>
        <Label>Filter by Type:</Label>
        <Select value={typeFilter} onChange={setTypeFilter}>
          <Option value="">All Types</Option>
          <Option value="CLIENT">Client</Option>
          <Option value="COLLEAGUE">Colleague</Option>
          <Option value="MENTOR">Mentor</Option>
          <Option value="PROFESSOR">Professor</Option>
          <Option value="OTHER">Other</Option>
        </Select>
      </FilterGroup>
      <FilterGroup>
        <Label>Min Rating:</Label>
        <Select value={ratingFilter} onChange={setRatingFilter}>
          <Option value="">All Ratings</Option>
          <Option value="5">5 Stars</Option>
          <Option value="4">4+ Stars</Option>
          <Option value="3">3+ Stars</Option>
        </Select>
      </FilterGroup>
      <FilterActions>
        <Button variant="secondary" onClick={clearFilters}>Clear Filters</Button>
      </FilterActions>
    </FiltersContainer>

    <StateBoundary>
      <LoadingState when="isLoading && testimonials.length === 0">
        <CenteredSpinner>
          <LoadingSpinner />
        </CenteredSpinner>
      </LoadingState>

      <ErrorState when="error && testimonials.length === 0">
        <EmptyState>
          <p>{`Error: ${error}`}</p>
          <Button onClick="loadTestimonials">Retry</Button>
        </EmptyState>
      </ErrorState>

      <EmptyDataState when="testimonials.length === 0 && !isLoading">
        <EmptyState>
          <p>No testimonials found. Create your first testimonial!</p>
          <LinkButton to="/admin/testimonials/new">Create Testimonial</LinkButton>
        </EmptyState>
      </EmptyDataState>

      <DataTable when="testimonials.length > 0">
        <Table role="table">
          <TableHeader>
            <TableRow>
              <TableHeaderCell>Author</TableHeaderCell>
              <TableHeaderCell>Type</TableHeaderCell>
              <TableHeaderCell>Rating</TableHeaderCell>
              <TableHeaderCell>Content</TableHeaderCell>
              <TableHeaderCell>Featured</TableHeaderCell>
              <TableHeaderCell>Actions</TableHeaderCell>
            </TableRow>
          </TableHeader>
          <TableBody>
            {testimonials.map(testimonial => (
              <TableRow key={testimonial.id}>
                <TableCell>
                  <AuthorInfo>
                    <AuthorName>{testimonial.authorName}</AuthorName>
                    {testimonial.authorTitle && (
                      <AuthorDetails>
                        {testimonial.authorTitle}
                        {testimonial.authorCompany && ` at ${testimonial.authorCompany}`}
                      </AuthorDetails>
                    )}
                  </AuthorInfo>
                </TableCell>
                <TableCell>
                  <TypeBadge $type={testimonial.type}>{testimonial.type}</TypeBadge>
                </TableCell>
                <TableCell>
                  <RatingDisplay>
                    {[1,2,3,4,5].map(star => (
                      <Star $filled={star <= (testimonial.rating || 0)}>★</Star>
                    ))}
                    <RatingValue>({testimonial.rating || 0})</RatingValue>
                  </RatingDisplay>
                </TableCell>
                <TableCell>
                  <ContentPreview title={testimonial.content}>
                    {truncate(testimonial.content, 100)}
                  </ContentPreview>
                </TableCell>
                <TableCell>
                  {testimonial.isFeatured ? '⭐' : '-'}
                </TableCell>
                <TableCell>
                  <ActionButtons>
                    <Link to={`/admin/testimonials/${testimonial.id}/edit`}>
                      <Button variant="secondary" size="sm">Edit</Button>
                    </Link>
                    <Button variant="danger" size="sm" onClick={() => handleDelete(testimonial.id)}>
                      Delete
                    </Button>
                  </ActionButtons>
                </TableCell>
              </TableRow>
            ))}
          </TableBody>
        </Table>
      </DataTable>
    </StateBoundary>
  </PageContainer>
</AdminTestimonialsPage>

{주요 컴포넌트 설명:
- FiltersContainer: 타입과 평점 필터를 제공하는 필터 섹션
- TypeBadge: 타입별로 색상이 다른 배지 (CLIENT=blue, COLLEAGUE=green, MENTOR=yellow, PROFESSOR=blue, OTHER=gray)
- RatingDisplay: 별점을 시각적으로 표시하는 컴포넌트
- ContentPreview: 긴 내용을 truncate하여 표시
- AuthorInfo: 작성자 이름과 직책/회사 정보를 표시
}

