<?xml version="1.0" encoding="UTF-8"?>
<AdminProjectsPage>
  {ProjectsAdminPage는 포트폴리오 프로젝트 데이터를 CRUD로 관리하는 테이블 중심 화면입니다.}

  <PageContainer role="main" aria-label="Projects Admin">
    <PageHeader>
      <PageTitle>Projects</PageTitle>
      <PrimaryActionLink to="/admin/projects/new">
        <Button variant="primary">Create New Project</Button>
      </PrimaryActionLink>
    </PageHeader>

    <StateBoundary>
      <LoadingState when="isLoading && projects.length === 0">
        <CenteredSpinner>
          <LoadingSpinner />
        </CenteredSpinner>
      </LoadingState>

      <ErrorState when="error && projects.length === 0">
        <EmptyState>
          <p>{`Error: ${error}`}</p>
          <Button onClick="loadProjects">Retry</Button>
        </EmptyState>
      </ErrorState>

      <EmptyDataState when="projects.length === 0 && !isLoading">
        <EmptyState>
          {H9: Help Users Recognize, Diagnose, and Recover from Errors - Empty state with recovery action}
          <p style="fontSize: 1.125rem, marginBottom: 0.5rem, color: neutral[900]">
            No projects found.
          </p>
          <p style="marginBottom: 1.5rem, color: neutral[500]">
            Create your first project to get started!
          </p>
          <Link to="/admin/projects/new">
            <Button variant="primary" style="marginTop: 1rem">
              Create Your First Project
            </Button>
          </Link>
        </EmptyState>
      </EmptyDataState>

      <DataTable when="projects.length > 0">
        <Table role="table">
          <TableHeader>
            <TableRow>
              <TableHeaderCell>Title</TableHeaderCell>
              <TableHeaderCell>Status</TableHeaderCell>
              <TableHeaderCell>Featured</TableHeaderCell>
              <TableHeaderCell>Start Date</TableHeaderCell>
              <TableHeaderCell>End Date</TableHeaderCell>
              <TableHeaderCell>Actions</TableHeaderCell>
            </TableRow>
          </TableHeader>
          <TableBody>
            {projects.map(project => (
              <TableRow key={project.id}>
                <TableCell>{project.title}</TableCell>
                <TableCell>
                  {H2: Match Between System and the Real World - User-friendly text}
                  <StatusBadge $status={project.status}>
                    {getStatusText(project.status)}
                    {상태 텍스트: COMPLETED → "Published", IN_PROGRESS → "In Progress", PLANNING → "Draft", ARCHIVED → "Archived"}
                  </StatusBadge>
                  {StatusBadge 색상: Traffic light system (H2)}
                  {COMPLETED: success-500 light/dark, IN_PROGRESS: warning-500 light/dark, PLANNING: primary[50]/primary[800], ARCHIVED: neutral[100]/neutral[700]}
                </TableCell>
                <TableCell>{project.isFeatured ? '⭐' : '-'}</TableCell>
                <TableCell>{formatDate(project.startDate)}</TableCell>
                <TableCell>{formatDate(project.endDate)}</TableCell>
                <TableCell>
                  <ActionButtons>
                    <Link to={`/admin/projects/${project.id}/edit`}>
                      <Button variant="secondary" size="sm">Edit</Button>
                    </Link>
                    {H5: Error Prevention - Delete button with error-500 color}
                    <Button 
                      variant="danger" 
                      size="sm"
                      onClick={() => handleDeleteClick(project.id, project.title)}
                      style="background: error[500], color: white"
                    >
                      Delete
                    </Button>
                    {handleDeleteClick: ConfirmationModal을 열기 위한 함수}
                  </ActionButtons>
                </TableCell>
              </TableRow>
            ))}
          </TableBody>
        </Table>

        <PaginationControls when="totalPages > 1">
          <Button variant="secondary" disabled={page === 1} onClick="setPage(p => Math.max(1, p - 1))">
            Previous
          </Button>
          <PaginationInfo>{`Page ${page} of ${totalPages}`}</PaginationInfo>
          <Button variant="secondary" disabled={page === totalPages} onClick="setPage(p => Math.min(totalPages, p + 1))">
            Next
          </Button>
        </PaginationControls>
      </DataTable>
    </StateBoundary>
    
    {H5: Error Prevention - Confirmation Modal}
    <ConfirmationModal
      isOpen={deleteModal.isOpen}
      title="Delete Project"
      message={`Are you sure you want to delete "${deleteModal.projectTitle}"? This action cannot be undone.`}
      confirmText="Delete"
      cancelText="Cancel"
      onConfirm={handleDeleteConfirm}
      onCancel={handleDeleteCancel}
    />
    {ConfirmationModal: 삭제 확인 다이얼로그, destructive action 방지}
  </PageContainer>
</AdminProjectsPage>

