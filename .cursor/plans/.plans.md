# Frontend CRUD Admin Dashboard Implementation Plan

**Last Updated**: 2025-01-27  
**Status**: ‚úÖ Core Implementation Complete | üöß Enhanced Features Pending

## Overview

This plan implements a comprehensive CRUD (Create, Read, Update, Delete) admin dashboard on the frontend that allows the website owner to manage key content: Projects, Academics, and Journey Milestones. The system will integrate with existing backend APIs and extend them where necessary.

## Implementation Status

### ‚úÖ Completed (Core Functionality)
- **Backend**: 
  - ‚úÖ Academic CRUD endpoints (POST, PUT, DELETE)
  - ‚úÖ Journey Milestone backend (Domain, Repository, Service, Controller, DTOs, Mapper)
  - ‚úÖ Security configuration (method security, role-based access)
  - ‚úÖ MediaController authorization
  
- **Frontend**: 
  - ‚úÖ Admin authentication system (adminStore, adminApi, AdminRoute)
  - ‚úÖ Admin layout (sidebar, header, responsive)
  - ‚úÖ Admin dashboard (statistics and overview)
  - ‚úÖ CRUD API services (projectsApi, academicsApi, milestonesApi, uploadApi)
  - ‚úÖ Projects management (list, create, edit, delete)
  - ‚úÖ Academics management (list, create, edit, delete)
  - ‚úÖ Journey Milestones management (list, delete)
  - ‚úÖ Routing setup (all admin routes protected)
  - ‚úÖ JourneyMilestoneSection API integration

### üöß Pending (Enhanced Features)
- ‚è≥ MilestoneForm component with nested object support
- ‚è≥ Rich text editor for markdown descriptions
- ‚è≥ Image upload UI component
- ‚è≥ Toast notification system
- ‚è≥ Comprehensive testing suite

## Current State Analysis

### Backend Status

**Projects:**
- ‚úÖ Full CRUD API exists (`ProjectController`)
  - GET `/api/v1/projects` - List with pagination
  - GET `/api/v1/projects/{id}` - Get single project
  - POST `/api/v1/projects` - Create project
  - PUT `/api/v1/projects/{id}` - Update project
  - DELETE `/api/v1/projects/{id}` - Delete project
- ‚úÖ DTOs exist: `ProjectCreateRequest`, `ProjectUpdateRequest`
- ‚úÖ Service layer implemented

**Academics:**
- ‚úÖ GET endpoints exist (`AcademicController`)
  - GET `/api/v1/academics` - List with pagination
  - GET `/api/v1/academics/{id}` - Get single academic
- ‚ùå Missing: POST, PUT, DELETE endpoints
- ‚ùå Missing: Create/Update DTOs

**Journey Milestones:**
- ‚ùå No backend entity exists
- ‚ùå No API endpoints
- ‚ö†Ô∏è Currently hardcoded in frontend (`JourneyMilestoneSection.tsx`)

**Authentication:**
- ‚úÖ Admin system exists (`AdminUser`, `AdminRole`)
- ‚úÖ JWT authentication implemented
- ‚úÖ Role-based access control (SUPER_ADMIN, ADMIN, CONTENT_MANAGER, VIEWER)
- ‚úÖ Security configuration exists

### Frontend Status

**Current State:**
- ‚ùå No admin dashboard page
- ‚ùå No CRUD forms
- ‚ùå No admin authentication check
- ‚ùå No file upload component
- ‚ùå No rich text editor
- ‚úÖ Auth store exists (`frontend/src/store/authStore.ts`)
- ‚úÖ API client with JWT support exists
- ‚úÖ Journey milestones hardcoded in component

## Implementation Plan

### Phase 1: Backend API Completion

#### 1.1 Academic CRUD Endpoints

**File**: `backend/src/main/java/com/mytechfolio/portfolio/controller/AcademicController.java`

**Actions:**
- Add POST endpoint for creating academics
- Add PUT endpoint for updating academics
- Add DELETE endpoint for deleting academics
- Add proper authorization checks (`@PreAuthorize` or security config)

**Create DTOs:**
- `AcademicCreateRequest.java` - For creating new academic records
- `AcademicUpdateRequest.java` - For updating existing records

**Example Structure:**
```java
@PostMapping
@PreAuthorize("hasRole('CONTENT_MANAGER') or hasRole('ADMIN')")
public ResponseEntity<ApiResponse<AcademicResponse>> createAcademic(
    @Valid @RequestBody AcademicCreateRequest request
) {
    AcademicResponse response = academicService.createAcademic(request);
    return ResponseUtil.created(response, "Academic record created successfully");
}

@PutMapping("/{id}")
@PreAuthorize("hasRole('CONTENT_MANAGER') or hasRole('ADMIN')")
public ResponseEntity<ApiResponse<AcademicResponse>> updateAcademic(
    @PathVariable @ValidMongoId String id,
    @Valid @RequestBody AcademicUpdateRequest request
) {
    AcademicResponse response = academicService.updateAcademic(id, request);
    return ResponseUtil.ok(response, "Academic record updated successfully");
}

@DeleteMapping("/{id}")
@PreAuthorize("hasRole('CONTENT_MANAGER') or hasRole('ADMIN')")
public ResponseEntity<ApiResponse<Void>> deleteAcademic(
    @PathVariable @ValidMongoId String id
) {
    academicService.deleteAcademic(id);
    return ResponseUtil.noContent();
}
```

#### 1.2 Journey Milestone Backend Implementation

**New Files to Create:**

1. **Domain Entity**: `backend/src/main/java/com/mytechfolio/portfolio/domain/JourneyMilestone.java`
```java
@Document(collection = "journey_milestones")
@Data
@Builder
public class JourneyMilestone {
    @Id
    private String id;
    
    private String year; // e.g., "2015", "2015~2020"
    private String title;
    private String description;
    private String icon; // Icon identifier or URL
    
    @Builder.Default
    private List<String> techStack = new ArrayList<>();
    
    @Builder.Default
    private MilestoneStatus status = MilestoneStatus.COMPLETED;
    
    @Builder.Default
    private Integer technicalComplexity = 1; // 1-5
    
    @Builder.Default
    private Integer projectCount = 0;
    
    // Optional fields
    private CodeMetrics codeMetrics;
    private List<KeyAchievement> keyAchievements;
    private List<SkillLevel> skillProgression;
    
    @CreatedDate
    private LocalDateTime createdAt;
    
    @LastModifiedDate
    private LocalDateTime updatedAt;
    
    public enum MilestoneStatus {
        COMPLETED, CURRENT, PLANNED
    }
}
```

2. **Repository**: `backend/src/main/java/com/mytechfolio/portfolio/repository/JourneyMilestoneRepository.java`
```java
public interface JourneyMilestoneRepository extends MongoRepository<JourneyMilestone, String> {
    List<JourneyMilestone> findAllByOrderByYearAsc();
    List<JourneyMilestone> findByStatus(MilestoneStatus status);
}
```

3. **Service**: `backend/src/main/java/com/mytechfolio/portfolio/service/JourneyMilestoneService.java`
- Implement CRUD operations
- Follow existing service patterns

4. **Controller**: `backend/src/main/java/com/mytechfolio/portfolio/controller/JourneyMilestoneController.java`
- Full CRUD endpoints
- Authorization: CONTENT_MANAGER or ADMIN

5. **DTOs**:
- `JourneyMilestoneCreateRequest.java`
- `JourneyMilestoneUpdateRequest.java`
- `JourneyMilestoneResponse.java`

#### 1.3 Security Configuration Updates

**File**: `backend/src/main/java/com/mytechfolio/portfolio/security/config/SecurityConfig.java`

**Actions:**
- Ensure admin endpoints require authentication
- Configure role-based access:
  - CONTENT_MANAGER: Can manage Projects, Academics, Journey Milestones
  - ADMIN: Full access
  - SUPER_ADMIN: Full access + system config

### Phase 2: Frontend Admin Infrastructure

#### 2.1 Admin Authentication & Authorization

**File**: `frontend/src/store/adminStore.ts` (new)

**Purpose**: Manage admin authentication state and permissions

**Structure:**
```typescript
interface AdminState {
  isAuthenticated: boolean
  user: AdminUser | null
  role: AdminRole | null
  permissions: string[]
  login: (credentials: LoginCredentials) => Promise<void>
  logout: () => void
  checkPermission: (permission: string) => boolean
  hasRole: (role: AdminRole) => boolean
}

type AdminRole = 'SUPER_ADMIN' | 'ADMIN' | 'CONTENT_MANAGER' | 'VIEWER'
```

**File**: `frontend/src/services/adminApi.ts` (new)

**Purpose**: API client for admin operations

**Endpoints:**
- POST `/api/v1/auth/admin/login` - Admin login
- POST `/api/v1/auth/admin/logout` - Admin logout
- GET `/api/v1/auth/admin/me` - Get current admin user
- GET `/api/v1/auth/admin/permissions` - Get user permissions

#### 2.2 Admin Route Protection

**File**: `frontend/src/components/admin/AdminRoute.tsx` (new)

**Purpose**: Protected route component for admin pages

**Features:**
- Check authentication
- Check role/permissions
- Redirect to login if unauthorized
- Show loading state

**Usage:**
```typescript
<AdminRoute requiredRole="CONTENT_MANAGER">
  <AdminDashboard />
</AdminRoute>
```

#### 2.3 Admin Layout Component

**File**: `frontend/src/components/admin/AdminLayout.tsx` (new)

**Purpose**: Layout wrapper for admin pages

**Features:**
- Sidebar navigation
- Header with user info and logout
- Breadcrumbs
- Main content area
- Responsive design

**Structure:**
```
AdminLayout
‚îú‚îÄ‚îÄ AdminSidebar (navigation)
‚îú‚îÄ‚îÄ AdminHeader (user info, logout)
‚îî‚îÄ‚îÄ AdminContent (main area with breadcrumbs)
```

### Phase 3: Admin Dashboard Pages

#### 3.1 Admin Dashboard Home

**File**: `frontend/src/pages/admin/AdminDashboard.tsx` (new)

**Purpose**: Main admin dashboard with overview

**Features:**
- Statistics cards (total projects, academics, milestones)
- Recent activity feed
- Quick actions
- System status

#### 3.2 Projects Management

**File**: `frontend/src/pages/admin/ProjectsAdminPage.tsx` (new)

**Components:**
- `ProjectsList.tsx` - Table/list view with pagination
- `ProjectForm.tsx` - Create/Edit form
- `ProjectDeleteDialog.tsx` - Confirmation dialog

**Features:**
- List all projects with filters
- Create new project
- Edit existing project
- Delete project (with confirmation)
- Image upload for project images
- Rich text editor for description
- Tech stack multi-select
- Academic relationship selection

**Form Fields:**
- Title (required, 3-255 chars)
- Summary (required, 10-500 chars)
- Description (required, 20-10000 chars, markdown)
- Start Date (required)
- End Date (required, must be after start date)
- GitHub URL (optional, validated)
- Demo URL (optional, validated)
- Tech Stack IDs (required, multi-select)
- Related Academic IDs (optional, multi-select)
- Is Featured (checkbox)
- Status (dropdown: PLANNING, IN_PROGRESS, COMPLETED, ARCHIVED)
- Project Image (file upload)

#### 3.3 Academics Management

**File**: `frontend/src/pages/admin/AcademicsAdminPage.tsx` (new)

**Components:**
- `AcademicsList.tsx` - Table/list view
- `AcademicForm.tsx` - Create/Edit form
- `AcademicDeleteDialog.tsx` - Confirmation dialog

**Features:**
- List all academics with filters
- Create new academic record
- Edit existing record
- Delete record (with confirmation)
- Semester filter
- Grade/GPA input

**Form Fields:**
- Course Name (required)
- Semester (required, e.g., "2024-1")
- Grade/GPA (optional)
- Description (optional)
- Related Projects (optional, multi-select)

#### 3.4 Journey Milestones Management

**File**: `frontend/src/pages/admin/JourneyMilestonesAdminPage.tsx` (new)

**Components:**
- `MilestonesList.tsx` - Timeline/list view
- `MilestoneForm.tsx` - Create/Edit form
- `MilestoneDeleteDialog.tsx` - Confirmation dialog

**Features:**
- List all milestones (ordered by year)
- Create new milestone
- Edit existing milestone
- Delete milestone (with confirmation)
- Drag-and-drop reordering (optional)
- Status management (COMPLETED, CURRENT, PLANNED)
- Technical complexity slider (1-5)
- Project count input
- Code metrics input (optional)
- Key achievements management (add/remove)
- Skill progression management (add/remove)

**Form Fields:**
- Year (required, e.g., "2015" or "2015~2020")
- Title (required)
- Description (required)
- Icon (optional, icon picker or URL)
- Tech Stack (multi-select)
- Status (dropdown: COMPLETED, CURRENT, PLANNED)
- Technical Complexity (slider: 1-5)
- Project Count (number input)
- Code Metrics (optional, expandable section)
  - Lines of Code
  - Commits
  - Repositories
- Key Achievements (array, add/remove)
  - Title
  - Description
  - Impact
- Skill Progression (array, add/remove)
  - Name
  - Level (1-5)
  - Category (Frontend, Backend, Database, DevOps, Other)

### Phase 4: Reusable Admin Components

#### 4.1 Form Components

**File**: `frontend/src/components/admin/forms/AdminForm.tsx` (new)

**Purpose**: Base form component with common functionality

**Features:**
- Form validation
- Error display
- Loading states
- Submit handling
- Cancel button

**File**: `frontend/src/components/admin/forms/RichTextEditor.tsx` (new)

**Purpose**: Markdown/rich text editor for descriptions

**Options:**
- Use `react-markdown` with `react-simplemde-editor`
- Or use `@uiw/react-md-editor`
- Support preview mode
- Toolbar with formatting options

**File**: `frontend/src/components/admin/forms/ImageUpload.tsx` (new)

**Purpose**: Image upload component

**Features:**
- Drag and drop
- File selection dialog
- Image preview
- Progress indicator
- Upload to backend (multipart/form-data)
- Image URL storage

**File**: `frontend/src/components/admin/forms/TechStackSelector.tsx` (new)

**Purpose**: Multi-select for tech stacks

**Features:**
- Search/filter tech stacks
- Multi-select with chips
- Load from API
- Create new tech stack (if permission)

**File**: `frontend/src/components/admin/forms/DateRangePicker.tsx` (new)

**Purpose**: Date range picker for start/end dates

**Features:**
- Start date picker
- End date picker
- Validation (end must be after start)
- Date format display

#### 4.2 Data Table Component

**File**: `frontend/src/components/admin/AdminDataTable.tsx` (new)

**Purpose**: Reusable data table for listing entities

**Features:**
- Pagination
- Sorting
- Filtering
- Row actions (edit, delete)
- Bulk actions (optional)
- Responsive design
- Loading states
- Empty states

**Props:**
```typescript
interface AdminDataTableProps<T> {
  data: T[]
  columns: ColumnDef<T>[]
  loading?: boolean
  pagination?: PaginationState
  onEdit?: (item: T) => void
  onDelete?: (item: T) => void
  onSort?: (field: string, direction: 'asc' | 'desc') => void
  onFilter?: (filters: FilterState) => void
}
```

#### 4.3 Confirmation Dialogs

**File**: `frontend/src/components/admin/DeleteConfirmationDialog.tsx` (new)

**Purpose**: Reusable delete confirmation dialog

**Features:**
- Warning message
- Item name display
- Confirm/Cancel buttons
- Loading state during deletion

### Phase 5: API Integration Services

#### 5.1 Projects API Service

**File**: `frontend/src/services/admin/projectsApi.ts` (new)

**Functions:**
```typescript
export const projectsApi = {
  getAll: (page: number, size: number, filters?: ProjectFilters) => Promise<PageResponse<Project>>
  getById: (id: string) => Promise<ProjectDetail>
  create: (data: ProjectCreateRequest) => Promise<ProjectDetail>
  update: (id: string, data: ProjectUpdateRequest) => Promise<ProjectDetail>
  delete: (id: string) => Promise<void>
  uploadImage: (projectId: string, file: File) => Promise<string> // Returns image URL
}
```

#### 5.2 Academics API Service

**File**: `frontend/src/services/admin/academicsApi.ts` (new)

**Functions:**
```typescript
export const academicsApi = {
  getAll: (page: number, size: number, filters?: AcademicFilters) => Promise<PageResponse<Academic>>
  getById: (id: string) => Promise<Academic>
  create: (data: AcademicCreateRequest) => Promise<Academic>
  update: (id: string, data: AcademicUpdateRequest) => Promise<Academic>
  delete: (id: string) => Promise<void>
}
```

#### 5.3 Journey Milestones API Service

**File**: `frontend/src/services/admin/milestonesApi.ts` (new)

**Functions:**
```typescript
export const milestonesApi = {
  getAll: () => Promise<JourneyMilestone[]> // Ordered by year
  getById: (id: string) => Promise<JourneyMilestone>
  create: (data: MilestoneCreateRequest) => Promise<JourneyMilestone>
  update: (id: string, data: MilestoneUpdateRequest) => Promise<JourneyMilestone>
  delete: (id: string) => Promise<void>
  reorder: (ids: string[]) => Promise<void> // Optional: for drag-and-drop
}
```

### Phase 6: Routing & Navigation

#### 6.1 Admin Routes

**File**: `frontend/src/App.tsx` (update)

**Add routes:**
```typescript
<Route path="/admin" element={<AdminRoute><AdminLayout /></AdminRoute>}>
  <Route index element={<AdminDashboard />} />
  <Route path="projects" element={<ProjectsAdminPage />} />
  <Route path="projects/new" element={<ProjectForm mode="create" />} />
  <Route path="projects/:id/edit" element={<ProjectForm mode="edit" />} />
  <Route path="academics" element={<AcademicsAdminPage />} />
  <Route path="academics/new" element={<AcademicForm mode="create" />} />
  <Route path="academics/:id/edit" element={<AcademicForm mode="edit" />} />
  <Route path="milestones" element={<JourneyMilestonesAdminPage />} />
  <Route path="milestones/new" element={<MilestoneForm mode="create" />} />
  <Route path="milestones/:id/edit" element={<MilestoneForm mode="edit" />} />
</Route>
```

#### 6.2 Admin Navigation

**File**: `frontend/src/components/admin/AdminSidebar.tsx` (new)

**Navigation Items:**
- Dashboard (home)
- Projects
- Academics
- Journey Milestones
- Settings (if SUPER_ADMIN)
- Logout

**Features:**
- Active route highlighting
- Collapsible on mobile
- Role-based menu items (hide items user can't access)

### Phase 7: File Upload Implementation

#### 7.1 Backend Image Upload Endpoint

**File**: `backend/src/main/java/com/mytechfolio/portfolio/controller/MediaController.java` (new or update)

**Endpoint:**
```java
@PostMapping("/upload")
@PreAuthorize("hasRole('CONTENT_MANAGER') or hasRole('ADMIN')")
public ResponseEntity<ApiResponse<MediaUploadResponse>> uploadImage(
    @RequestParam("file") MultipartFile file,
    @RequestParam(value = "type", defaultValue = "project") String type
) {
    // Validate file type and size
    // Save to storage (local or cloud)
    // Return URL
}
```

#### 7.2 Frontend Upload Service

**File**: `frontend/src/services/admin/uploadApi.ts` (new)

**Function:**
```typescript
export const uploadApi = {
  uploadImage: (file: File, type: 'project' | 'academic' | 'milestone') => Promise<string>
}
```

### Phase 8: Form Validation

#### 8.1 Validation Schemas

**File**: `frontend/src/validations/adminSchemas.ts` (new)

**Use**: `zod` or `yup` for schema validation

**Schemas:**
- `projectCreateSchema`
- `projectUpdateSchema`
- `academicCreateSchema`
- `academicUpdateSchema`
- `milestoneCreateSchema`
- `milestoneUpdateSchema`

#### 8.2 Form Error Handling

**File**: `frontend/src/components/admin/forms/FormErrors.tsx` (new)

**Purpose**: Display validation errors

**Features:**
- Field-level errors
- General form errors
- API error messages
- Styling consistent with design system

### Phase 9: State Management

#### 9.1 Admin State Stores

**File**: `frontend/src/store/adminProjectsStore.ts` (new)

**Purpose**: Manage projects list state

**State:**
- Projects list
- Current project (for editing)
- Filters
- Pagination
- Loading states
- Error states

**File**: `frontend/src/store/adminAcademicsStore.ts` (new)

**File**: `frontend/src/store/adminMilestonesStore.ts` (new)

#### 9.2 Optimistic Updates

**Strategy:**
- Update UI immediately on create/update/delete
- Revert on error
- Show loading indicators
- Handle race conditions

### Phase 10: UI/UX Enhancements

#### 10.1 Loading States

**Components:**
- Skeleton loaders for tables
- Spinner for forms
- Progress bars for uploads

#### 10.2 Success/Error Notifications

**File**: `frontend/src/components/admin/AdminNotification.tsx` (new)

**Purpose**: Toast notifications for actions

**Features:**
- Success messages
- Error messages
- Auto-dismiss
- Manual dismiss
- Stack multiple notifications

#### 10.3 Responsive Design

**Breakpoints:**
- Desktop: Full sidebar + content
- Tablet: Collapsible sidebar
- Mobile: Bottom navigation or hamburger menu

#### 10.4 Accessibility

**Requirements:**
- Keyboard navigation
- Screen reader support
- Focus management
- ARIA labels
- Error announcements

### Phase 11: Integration with Public Pages

#### 11.1 Update JourneyMilestoneSection

**File**: `frontend/src/components/sections/JourneyMilestoneSection.tsx` (update)

**Changes:**
- Remove hardcoded `milestoneData`
- Fetch from API: `milestonesApi.getAll()`
- Handle loading state
- Handle error state
- Cache data (optional)

#### 11.2 Update HomePage Featured Projects

**File**: `frontend/src/pages/HomePage.tsx` (verify)

**Ensure:**
- Featured projects are fetched from API
- `isFeatured` flag is respected

### Phase 12: Testing

#### 12.1 Unit Tests

**Files:**
- `__tests__/admin/adminStore.test.ts`
- `__tests__/admin/forms/ProjectForm.test.tsx`
- `__tests__/services/admin/projectsApi.test.ts`

#### 12.2 Integration Tests

**Files:**
- `__tests__/admin/ProjectsAdminPage.test.tsx`
- `__tests__/admin/AcademicsAdminPage.test.tsx`
- `__tests__/admin/MilestonesAdminPage.test.tsx`

#### 12.3 E2E Tests

**Scenarios:**
- Admin login flow
- Create project
- Edit project
- Delete project
- Create academic
- Create milestone
- Permission checks

## File Structure

```
frontend/src/
‚îú‚îÄ‚îÄ pages/
‚îÇ   ‚îî‚îÄ‚îÄ admin/
‚îÇ       ‚îú‚îÄ‚îÄ AdminDashboard.tsx
‚îÇ       ‚îú‚îÄ‚îÄ ProjectsAdminPage.tsx
‚îÇ       ‚îú‚îÄ‚îÄ AcademicsAdminPage.tsx
‚îÇ       ‚îî‚îÄ‚îÄ JourneyMilestonesAdminPage.tsx
‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îî‚îÄ‚îÄ admin/
‚îÇ       ‚îú‚îÄ‚îÄ AdminLayout.tsx
‚îÇ       ‚îú‚îÄ‚îÄ AdminSidebar.tsx
‚îÇ       ‚îú‚îÄ‚îÄ AdminHeader.tsx
‚îÇ       ‚îú‚îÄ‚îÄ AdminRoute.tsx
‚îÇ       ‚îú‚îÄ‚îÄ AdminDataTable.tsx
‚îÇ       ‚îú‚îÄ‚îÄ DeleteConfirmationDialog.tsx
‚îÇ       ‚îú‚îÄ‚îÄ AdminNotification.tsx
‚îÇ       ‚îî‚îÄ‚îÄ forms/
‚îÇ           ‚îú‚îÄ‚îÄ AdminForm.tsx
‚îÇ           ‚îú‚îÄ‚îÄ ProjectForm.tsx
‚îÇ           ‚îú‚îÄ‚îÄ AcademicForm.tsx
‚îÇ           ‚îú‚îÄ‚îÄ MilestoneForm.tsx
‚îÇ           ‚îú‚îÄ‚îÄ RichTextEditor.tsx
‚îÇ           ‚îú‚îÄ‚îÄ ImageUpload.tsx
‚îÇ           ‚îú‚îÄ‚îÄ TechStackSelector.tsx
‚îÇ           ‚îî‚îÄ‚îÄ DateRangePicker.tsx
‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îî‚îÄ‚îÄ admin/
‚îÇ       ‚îú‚îÄ‚îÄ adminApi.ts
‚îÇ       ‚îú‚îÄ‚îÄ projectsApi.ts
‚îÇ       ‚îú‚îÄ‚îÄ academicsApi.ts
‚îÇ       ‚îú‚îÄ‚îÄ milestonesApi.ts
‚îÇ       ‚îî‚îÄ‚îÄ uploadApi.ts
‚îú‚îÄ‚îÄ store/
‚îÇ   ‚îú‚îÄ‚îÄ adminStore.ts
‚îÇ   ‚îú‚îÄ‚îÄ adminProjectsStore.ts
‚îÇ   ‚îú‚îÄ‚îÄ adminAcademicsStore.ts
‚îÇ   ‚îî‚îÄ‚îÄ adminMilestonesStore.ts
‚îú‚îÄ‚îÄ validations/
‚îÇ   ‚îî‚îÄ‚îÄ adminSchemas.ts
‚îî‚îÄ‚îÄ types/
    ‚îî‚îÄ‚îÄ admin.ts

backend/src/main/java/com/mytechfolio/portfolio/
‚îú‚îÄ‚îÄ domain/
‚îÇ   ‚îî‚îÄ‚îÄ JourneyMilestone.java (new)
‚îú‚îÄ‚îÄ repository/
‚îÇ   ‚îî‚îÄ‚îÄ JourneyMilestoneRepository.java (new)
‚îú‚îÄ‚îÄ service/
‚îÇ   ‚îú‚îÄ‚îÄ JourneyMilestoneService.java (new)
‚îÇ   ‚îî‚îÄ‚îÄ AcademicService.java (update - add create/update/delete)
‚îú‚îÄ‚îÄ controller/
‚îÇ   ‚îú‚îÄ‚îÄ AcademicController.java (update - add POST/PUT/DELETE)
‚îÇ   ‚îú‚îÄ‚îÄ JourneyMilestoneController.java (new)
‚îÇ   ‚îî‚îÄ‚îÄ MediaController.java (new or update)
‚îî‚îÄ‚îÄ dto/
    ‚îú‚îÄ‚îÄ request/
    ‚îÇ   ‚îú‚îÄ‚îÄ AcademicCreateRequest.java (new)
    ‚îÇ   ‚îú‚îÄ‚îÄ AcademicUpdateRequest.java (new)
    ‚îÇ   ‚îú‚îÄ‚îÄ JourneyMilestoneCreateRequest.java (new)
    ‚îÇ   ‚îî‚îÄ‚îÄ JourneyMilestoneUpdateRequest.java (new)
    ‚îî‚îÄ‚îÄ response/
        ‚îî‚îÄ‚îÄ JourneyMilestoneResponse.java (new)
```

## Implementation Order

### Week 1: Backend Foundation
1. Complete Academic CRUD endpoints
2. Create Journey Milestone backend (domain, repository, service, controller, DTOs)
3. Add image upload endpoint
4. Update security configuration

### Week 2: Frontend Infrastructure
1. Create admin authentication store and API
2. Create AdminRoute component
3. Create AdminLayout component
4. Set up admin routes

### Week 3: Projects Management
1. Create ProjectsAdminPage
2. Create ProjectForm component
3. Create projects API service
4. Integrate with backend

### Week 4: Academics & Milestones Management
1. Create AcademicsAdminPage and form
2. Create JourneyMilestonesAdminPage and form
3. Create respective API services
4. Integrate with backend

### Week 5: Reusable Components & Polish
1. Create reusable form components (RichTextEditor, ImageUpload, etc.)
2. Create AdminDataTable component
3. Add notifications and error handling
4. Responsive design improvements

### Week 6: Integration & Testing
1. Update JourneyMilestoneSection to use API
2. Write unit tests
3. Write integration tests
4. E2E testing
5. Bug fixes and polish

## Security Considerations

1. **Authentication**: All admin endpoints require JWT token
2. **Authorization**: Role-based access control
   - CONTENT_MANAGER: Can manage content (Projects, Academics, Milestones)
   - ADMIN: Full access
   - SUPER_ADMIN: Full access + system settings
3. **Input Validation**: Both frontend and backend validation
4. **File Upload**: Validate file types, sizes, scan for malware
5. **CSRF Protection**: Use CSRF tokens for state-changing operations
6. **Rate Limiting**: Prevent abuse of admin endpoints
7. **Audit Logging**: Log all admin actions for security audit

## Success Criteria

- [x] Admin can log in with proper credentials
- [x] Admin dashboard displays statistics
- [x] Admin can create, read, update, delete projects
- [x] Admin can create, read, update, delete academics
- [x] Admin can view and delete journey milestones
- [ ] Admin can create and edit journey milestones (MilestoneForm pending)
- [ ] Image upload works for project images
- [ ] Rich text editor works for descriptions
- [x] Form validation works on frontend and backend
- [x] Role-based access control works correctly
- [x] Public pages display data from API (not hardcoded)
- [ ] All CRUD operations are tested
- [x] Responsive design works on all devices
- [x] Accessibility requirements met

## Dependencies

### Frontend
- `react-hook-form` - Form management
- `zod` or `yup` - Schema validation
- `react-markdown` or `@uiw/react-md-editor` - Rich text editor
- `react-dropzone` - File upload
- `@tanstack/react-table` - Data tables (optional)

### Backend
- Existing Spring Boot dependencies
- File storage (local or cloud - Azure Blob Storage recommended)

## Notes

- Follow existing design system (KickoffLabs, 4-point spacing)
- Use existing UI components where possible
- Maintain consistency with public pages
- Ensure all admin actions are logged for audit
- Consider adding undo/redo functionality for complex forms
- Add bulk operations if needed (bulk delete, bulk update)
- Consider adding export functionality (CSV, JSON)

## Remaining Implementation Tasks

### Phase 13: MilestoneForm Component (Ï§ëÏ≤© Í∞ùÏ≤¥ ÏßÄÏõê)

**File**: `frontend/src/components/admin/forms/MilestoneForm.tsx` (new)

**Purpose**: Create/Edit form for Journey Milestones with support for nested objects

**Features:**
- Year input (required, e.g., "2015" or "2015~2020")
- Title input (required)
- Description textarea (required)
- Icon input (optional, icon picker or URL)
- Tech Stack multi-select (array of strings)
- Status dropdown (COMPLETED, CURRENT, PLANNED)
- Technical Complexity slider (1-5)
- Project Count number input
- Code Metrics section (optional, expandable)
  - Lines of Code input
  - Commits input
  - Repositories input
- Key Achievements management (array, add/remove items)
  - Title input
  - Description textarea
  - Impact input
  - Add/Remove buttons
- Skill Progression management (array, add/remove items)
  - Name input
  - Level slider (1-5)
  - Category dropdown (Frontend, Backend, Database, DevOps, Other)
  - Add/Remove buttons

**Implementation Details:**
- Use state management for nested arrays
- Dynamic form fields for achievements and skills
- Validation for all nested fields
- Proper TypeScript types for nested objects
- Form submission handling with nested data structure

### Phase 14: Rich Text Editor (ÎßàÌÅ¨Îã§Ïö¥ ÏßÄÏõê)

**File**: `frontend/src/components/admin/forms/RichTextEditor.tsx` (new)

**Purpose**: Markdown/rich text editor component for project and academic descriptions

**Features:**
- Markdown editing with live preview
- Toolbar with formatting options (bold, italic, headings, lists, links, code blocks)
- Preview mode toggle
- Syntax highlighting for code blocks
- Image insertion support
- Character count
- Auto-save draft (optional)

**Technology Options:**
- Option 1: `@uiw/react-md-editor` - Full-featured markdown editor
- Option 2: `react-markdown` + `react-simplemde-editor` - Simple markdown editor
- Option 3: `react-quill` - Rich text editor (WYSIWYG)

**Integration:**
- Replace textarea in `ProjectForm.tsx` for description field
- Replace textarea in `AcademicForm.tsx` for description field (if needed)
- Support markdown rendering in public pages

**Props:**
```typescript
interface RichTextEditorProps {
  value: string
  onChange: (value: string) => void
  placeholder?: string
  minHeight?: number
  maxLength?: number
  error?: string
}
```

### Phase 15: Image Upload UI Component

**File**: `frontend/src/components/admin/forms/ImageUpload.tsx` (new)

**Purpose**: Reusable image upload component with drag-and-drop support

**Features:**
- Drag and drop file upload
- File selection dialog
- Image preview (thumbnail)
- Progress indicator during upload
- File type validation (images only: jpg, jpeg, png, gif, webp)
- File size validation (max 5MB recommended)
- Image cropping/resizing (optional)
- Multiple image upload support (for project galleries)
- Remove/replace image functionality
- Loading states
- Error handling and display

**Integration:**
- Use in `ProjectForm.tsx` for project image upload
- Use in `MilestoneForm.tsx` for milestone icon upload (if using image URLs)
- Connect to `uploadApi.uploadImage()` service

**Props:**
```typescript
interface ImageUploadProps {
  value?: string // Current image URL
  onChange: (url: string) => void
  onError?: (error: string) => void
  maxSize?: number // in bytes
  acceptedTypes?: string[] // MIME types
  multiple?: boolean
  label?: string
  required?: boolean
}
```

**UI/UX:**
- Drag-and-drop zone with visual feedback
- Preview area showing uploaded image
- Upload progress bar
- Error messages for invalid files
- Remove button to clear uploaded image

### Phase 16: Toast Notification System

**File**: `frontend/src/components/admin/AdminNotification.tsx` (new)

**Purpose**: Toast notification component for success/error/info messages

**Features:**
- Success notifications (green)
- Error notifications (red)
- Warning notifications (yellow)
- Info notifications (blue)
- Auto-dismiss after specified duration (default 5 seconds)
- Manual dismiss button
- Stack multiple notifications
- Position options (top-right, top-left, bottom-right, bottom-left)
- Animation (slide in/out)
- Accessibility (ARIA labels, keyboard dismiss)

**Usage:**
```typescript
import { useNotification } from '@components/admin/AdminNotification'

const { showSuccess, showError, showWarning, showInfo } = useNotification()

// In component
showSuccess('Project created successfully!')
showError('Failed to delete project')
```

**Integration Points:**
- `ProjectForm.tsx` - Show success/error on create/update
- `AcademicForm.tsx` - Show success/error on create/update
- `MilestoneForm.tsx` - Show success/error on create/update
- `ProjectsAdminPage.tsx` - Show success on delete
- `AcademicsAdminPage.tsx` - Show success on delete
- `JourneyMilestonesAdminPage.tsx` - Show success on delete

**Implementation:**
- Create notification context/provider
- Create notification hook
- Create notification component with animations
- Add to `AdminLayout.tsx` or root component

### Phase 17: Testing Implementation

#### 17.1 Unit Tests

**Files to Create:**
- `frontend/src/__tests__/store/adminStore.test.ts`
  - Test authentication state
  - Test permission checking
  - Test role-based functions
  - Test login/logout flow

- `frontend/src/__tests__/services/admin/projectsApi.test.ts`
  - Test getAll function
  - Test getById function
  - Test create function
  - Test update function
  - Test delete function
  - Test error handling

- `frontend/src/__tests__/services/admin/academicsApi.test.ts`
  - Similar tests as projectsApi

- `frontend/src/__tests__/services/admin/milestonesApi.test.ts`
  - Similar tests as projectsApi

- `frontend/src/__tests__/components/admin/forms/ProjectForm.test.tsx`
  - Test form rendering
  - Test form validation
  - Test form submission
  - Test error handling
  - Test field updates

- `frontend/src/__tests__/components/admin/forms/AcademicForm.test.tsx`
  - Similar tests as ProjectForm

- `frontend/src/__tests__/components/admin/AdminRoute.test.tsx`
  - Test authentication check
  - Test role-based access
  - Test redirect behavior
  - Test loading state

#### 17.2 Integration Tests

**Files to Create:**
- `frontend/src/__tests__/pages/admin/ProjectsAdminPage.test.tsx`
  - Test page rendering
  - Test data loading
  - Test CRUD operations
  - Test pagination
  - Test error states

- `frontend/src/__tests__/pages/admin/AcademicsAdminPage.test.tsx`
  - Similar tests as ProjectsAdminPage

- `frontend/src/__tests__/pages/admin/JourneyMilestonesAdminPage.test.tsx`
  - Similar tests as ProjectsAdminPage

- `frontend/src/__tests__/pages/admin/AdminDashboard.test.tsx`
  - Test statistics loading
  - Test dashboard rendering
  - Test quick actions

#### 17.3 E2E Tests (Playwright/Cypress)

**Test Scenarios:**
- `e2e/admin/admin-login.spec.ts`
  - Admin login flow
  - Invalid credentials handling
  - Session persistence

- `e2e/admin/projects-crud.spec.ts`
  - Create new project
  - Edit existing project
  - Delete project
  - View project list
  - Pagination navigation

- `e2e/admin/academics-crud.spec.ts`
  - Create new academic record
  - Edit existing record
  - Delete record
  - View academic list

- `e2e/admin/milestones-crud.spec.ts`
  - Create new milestone (once form is implemented)
  - Edit existing milestone
  - Delete milestone
  - View milestones list

- `e2e/admin/permissions.spec.ts`
  - Test CONTENT_MANAGER permissions
  - Test ADMIN permissions
  - Test VIEWER read-only access
  - Test unauthorized access redirects

**Testing Tools:**
- Unit Tests: Jest + React Testing Library
- Integration Tests: Jest + React Testing Library
- E2E Tests: Playwright (recommended) or Cypress
- Coverage: Istanbul/NYC for code coverage reports

**Coverage Goals:**
- Unit tests: 80%+ coverage
- Integration tests: Critical user flows
- E2E tests: Main admin workflows

## Implementation Priority

### High Priority (Core Functionality)
1. ‚úÖ MilestoneForm Component - Required for complete milestone CRUD
2. ‚úÖ Rich Text Editor - Improves content editing experience
3. ‚úÖ Image Upload Component - Essential for project images

### Medium Priority (UX Enhancements)
4. ‚úÖ Toast Notifications - Improves user feedback

### Lower Priority (Quality Assurance)
5. ‚úÖ Testing Implementation - Ensures reliability and maintainability

## Updated Implementation Timeline

### Week 7: Enhanced Forms & Components
1. Implement MilestoneForm with nested object support
2. Integrate Rich Text Editor into ProjectForm and AcademicForm
3. Create ImageUpload component
4. Integrate ImageUpload into ProjectForm

### Week 8: UX Enhancements
1. Implement Toast Notification system
2. Integrate notifications into all admin pages
3. Add loading states and error handling improvements
4. Polish UI/UX based on feedback

### Week 9: Testing & Quality Assurance
1. Write unit tests for stores and services
2. Write unit tests for form components
3. Write integration tests for admin pages
4. Write E2E tests for critical workflows
5. Achieve 80%+ code coverage
6. Bug fixes and refinements

